<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <title>Mini_Homepage</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../assets/css/world_style.css">

</head>
<body>
<header>
    <div class="wrap">
        <i class="material-icons-round md-light">face</i>
        <i class="material-icons-round">home</i>
    </div>
</header>
<section>
    <main>
        <div class="inner">
            <div class="inner2">
                <div class="wrap">
                    <div class="header">
                        <div class="today">today<p class="num"> 1004</p> / total 221425</div>
                        <div class="page-name"><span>mini_home.............</span></div>
                    </div>
                    <div class="content">
                        <div class="aside">
                            <div class="thumbnail shadow">
                                <div class="img"></div>
                                <div class="text">
                                    <p><b class="blue">학생</b> 이라는<b class="red"> 죄</b> 로</p>
                                    <p><b class="blue">학교</b> 라는<b class="red"> 교도소</b> 에서</p>
                                    <p><b class="blue">교실</b> 이라는<b class="red"> 감옥</b> 에 갇혀</p>
                                    <p><b class="blue">공부</b> 라는<b class="red"> 벌</b> 을 받고</p>
                                    <p><b class="blue">졸업</b> 이라는<b class="red"> 석방</b> 을 기다린다.</p>
                                </div>
                            </div>
                            <div class="my-info shadow">
                                <div class="footer">
                                    <div class="name">정현구</div>
                                    <div class="gender"></div>
                                    <div class="birth"> 1995.03.15</div>
                                </div>
                                <div class="sns-wrap">
                                    <a href="https://www.youtube.com/channel/UCIg6UhWVy7DXosuyx04PmeQ" class="youtube sns"></a>
                                    <a href="https://www.instagram.com/hyun_gooh/" class="insta sns"></a>
                                    <a href="https://www.facebook.com/profile.php?id=100003376894972" class="fb sns"></a>
                                    <a href="https://github.com/jhg3522" class="git sns"></a>
                                </div>
                            </div>
                        </div>
                        <div class="main">
                            <div class="main-wrap">
                                <div class="post-list shadow">
                                    <div class="list-name">
                                        <h5>Updated news</h5>
                                    </div>
                                    <div class="post-wrap">
                                        <div class="lately">
                                            <a href="#" class="lately_post">첫번째 게시물 입니다.</a>
                                            <a href="#" class="lately_post">두번째 게시물 입니다.</a>
                                            <a href="#" class="lately_post">세번째 게시물 입니다.</a>
                                            <a href="#" class="lately_post">네번째 게시물 입니다.</a>
                                        </div>
                                        <div class="list">
                                            <a href="#" class="post">프로필</a>
                                            <a href="#" class="post">사진첩</a>
                                            <a href="#" class="post">게시판</a>
                                            <a href="#" class="post">방명록</a>
                                            <a href="#" class="post">secret</a>
                                        </div>
                                    </div>

                                </div>
                                <div class="banner shadow">
                                    <div id="slider">
                                        <div class="img img1"></div>
                                        <div class="img img2"></div>
                                        <div class="img img3"></div>
                                        <div class="img img4"></div>
                                    </div>
                                </div>
                                <div class="comment shadow">
                                    <div class="comment-name">
                                        <h5>Friendly say</h5>
                                        <div class="input-outer">
                                            <input name="body" type="text" id="body"  placeholder="댓글을 입력해주세요~~!" class="input-comment" size="40">
                                        </div>
                                        <div class="input-name-outer">
                                            <input name="name" type="text" id="name" placeholder=" 이름 " class="input-comment-name" size="40">
                                        </div>
                                        <button type="button" onclick="validComment()" class="btn">확인</button>
                                    </div>
                                    <div class="comment-wrap">
                                        <ul>
                                            <li class="comment-li">
                                                <p class="comment-text"></p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <aside>
                <div class="m-player">
                    <div class="name"></div>
                    <div class="circle">
                       <div id="yt-player"></div>
                    </div>
                    <div class="bar"></div>
                    <div class="btn-wrapper">
                        <button class="btn" onclick="player.stopVideo()">
                            <div class="inner-wrapper">
                                <i class="material-icons-round">pause</i>
                            </div>
                        </button>
                        <button class="btn" onclick="playVideo()">
                            <div class="inner-wrapper">
                                <i class="material-icons-round">play_arrow</i>
                            </div>
                        </button>
                        <button class="btn" onclick="player.pauseVideo()">
                            <div class="inner-wrapper">
                                <i class="material-icons-round">skip_next</i>
                            </div>
                        </button>
                    </div>
                </div>
            </aside>
        </div>
        <div class="menu-bar">
            <a href="#">Home</a>
            <a href="#">Profile</a>
            <a href="#">Picture</a>
            <a href="#">Board</a>
            <a href="#">Secret</a>
        </div>
    </main>
</section>

<script>

    let slider = document.querySelector("#slider");
    let sliderCnt=0;
    console.log(slider.children);
    function showSlider(num){
        for (let i=0; i<slider.children.length;i++){
            if(i === num)
            {
                slider.children[i].style.visibility ='visible';
                slider.children[i].style.opacity = '1';
            }
            else {
                slider.children[i].style.visibility = 'hidden';
                slider.children[i].style.opacity = '0';
            }
        }
    }
    setInterval(function(){
        if(sliderCnt === slider.children.length)
        {
            sliderCnt =0;
        }
        showSlider(sliderCnt);
        sliderCnt++;
    }, 2000);

    // Load the IFrame Player API code asynchronously.
    let tag = document.createElement('script');
    tag.src = "https://www.youtube.com/player_api";
    let firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Replace the 'ytplayer' element with an <iframe> and
    // YouTube player after the API code downloads.
    let player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('yt-player', {
            height: '130',
            width: '160',
            videoId: 'iSwxR-eO0QM',
            playerVars: {
                'autoplay': 1, // 자동재생
                'controls': 0, // 재생컨트롤 노출여부
                'autohide': 0, // 재생컨트롤이 자동으로 사라질지의 여부
                'rel': 0, // 동영상 재생완료 후 유사동영상 노출여부
                'playsinline': 1, // 현페이지에서 재생
                'wmode': 'transparent',
                'modestbranding' : 1,
            },
            events:{
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }
    
    function onPlayerReady(event) {
        event.target.playVideo();//자동재생
    }
    let done = false;
    function onPlayerStateChange(event) {
        if (event.data === YT.PlayerState.PLAYING && !done) {
            // setTimeout(stopVideo, 6000);
            done = true; }
    }
    function stopVideo() { player.stopVideo(); }
    function playVideo() { player.playVideo(); }

    const btns = document.querySelectorAll('.btn');

    for(let btn of btns){
        btn.onclick = () => btn.classList.toggle('active');
    }


</script>

<script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-database.js"></script>
<script>
    let firebaseConfig = {
        apiKey: "AIzaSyAvCMD3tKp-2KdA6ebnrY6gsPNmUSt4hMA",
        authDomain: "kmu-front-end.firebaseapp.com",
        databaseURL: "https://kmu-front-end.firebaseio.com",
        projectId: "kmu-front-end",
        storageBucket: "kmu-front-end.appspot.com",
        messagingSenderId: "48258553792",
        appId: "1:48258553792:web:03f44d1198b04bcbd91a25",
        measurementId: "G-60187YJSSE"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    let database = firebase.database();

    function writeComment(body,name){
        const postComment ={
            name,
            body,
        };
        firebase.database().ref().child('comments').push(postComment);
    }

    function validComment(){
        

        writeComment(body,name);
    }

    const commentRef = firebase.database().ref('/comments/').on('value',function(snapshot){
        const commentData = Object.entries(snapshot.val());
        let liContent = document.querySelector(".comment-li");
        liContent.innerHTML = "";
        for(let i =0;i<commentData.length;i++){
            const [key,body] = commentData[i];
            liContent.innerHTML += "<li>"+body.body+""+body.name+"</li>"
        }
    });


</script>
</body>
</html>